nameSuffix: -preset
bases:
- ../base

commonLabels:
  app: specjbb-preset-medium
  type: preset
  size: medium

patchesStrategicMerge:
  - resources.yaml

configMapGenerator:
  - name: specjbb
    behavior: merge
    literals:
      - group_count=2
      - report_interval=1
      - cores=96
      - id_env=preset

  - name: specjbb-java
    behavior: merge
    literals:
      - ParallelGCThreads=2
      # for the controller
      - contmeg="2g"
      - contnew="1536m"
      # for the injector
      - tximeg_numeric_gb=2
      - tximeg="2g"
      - txinew="1536m"
      # for the backend
      - backendimeg='18000M'
      - backendinew='16920M'
      - gc_size='12'
      - worker_size='12'

  - name: specjbb-config
    behavior: merge
    literals:
      # 'specjbb.group.count' set by number replicas groups and controllers
      - specjbb.txi.pergroup.count=1
      - specjbb.controller.rtcurve.warmup.step=0.5
      - specjbb.controller.rtcurve.step=1
      - specjbb.controller.type=PRESET
      - specjbb.forkjoin.workers=24
