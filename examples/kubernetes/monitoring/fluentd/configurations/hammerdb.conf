<filter kubernetes.var.log.containers.hammerdb**>
  @type parser
  key_name log
  reserve_data true
  <parse>
     @type multi_format
    <pattern>
      format regexp
      expression /^TPM: (?<tpm>\d+)./
      types tpm:float
    </pattern>
  </parse>
</filter>

<filter kubernetes.var.log.containers.hammerdb**>
  @type prometheus
  <metric>
    name apm__hammerdb
    type gauge
    desc OPS
    key tpm
    <labels>
      task_name ${task_name}
      node ${hostname}
      app $.kubernetes.labels.app
      podname $.kubernetes.pod_name
      namespace $.kubernetes.namespace_name
    </labels>
  </metric>
</filter>
