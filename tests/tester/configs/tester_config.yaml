tests:
  - test_case_numa:
    tasks:
      - /wcatask1
      - /wcatask2

    allocator: !NUMAAllocator

    checks:
      - !MetricCheck
        name: numa__task_tasks_count
        value: 2

  - test_case_name0:
    tasks:
      - /wcatask1
      - /wcatask2

    allocator: !StaticAllocator
      rules:
        - name: Example first rule
          allocations:
            cpu_quota: 0.5
            cpu_shares: 10
            cpuset_cpus: '0-3'
            rdt:
              name: 'test'
              l3: 'L3:0=3;1=2'
    checks:
      - !FileCheck
        path: /sys/fs/cgroup/cpu/wcatask1/cpu.shares
        line: '10000'
        subvalue: '100'

  - test_case_name1:
    tasks:
      - /wcatask1
      - /wcatask2

    checks:
      - !MetricCheck
        name: task__wss_referenced_mb 
        labels:
          task_id: wcatask2
      - !MetricCheck
        name: task__wss_referenced_mb
        labels:
          task_id: wcatask4
      - !MetricCheck
        name: allocation_cpuset_cpus_number_of_cpus
        labels:
          task: wcatask2
        value: 4
      - !MetricCheck
        name: allocation_cpuset_cpus_number_of_cpus
        labels:
          task: wcatask4
        value: 4
