pipeline {
    agent any
    environment {
        PLAYBOOK='workloads/run_workloads.yaml'
        PROMETHEUS='http://100.64.176.12:9090'
        BUILD_COMMIT = "${GIT_COMMIT}"
        EXTRA_ANSIBLE_PARAMS = ""
    }
    stages {
        stage('Kubernetes environment') {
            agent { label 'kubernetes' }
            environment {
                INVENTORY='tests/e2e/demo_scenarios/common/inventory-kubernetes.yaml'
                KUBERNETES_HOST='100.64.176.34'
                CRT_PATH = '/etc/kubernetes/ssl/'
            }
            steps {
                print('Environment variables: \n'
                      'PLAYBOOK: {}\n'
                      'PROMETHEUS: {}\n'
                      'BUILD_COMMIT: {}\n'
                      'EXTRA_ANSIBLE_PARAMS: {}\n'
                      'INVENTORY: {}\n'
                      'KUBERNETES_HOST: {}\n'
                      'CRT_PATH: {}\n'.format(env.PLAYBOOK,
                                              env.PROMETHEUS,
                                              env.BUILD_COMMIT,
                                              env.EXTRA_ANSIBLE_PARAMS,
                                              env.INVENTORY,
                                              env.KUBERNETES_HOST,
                                              env.CRT_PATH))
            }
        }
        stage('Mesos environment') {
            agent { label 'mesos' }
            environment {
                INVENTORY='tests/e2e/demo_scenarios/common/inventory-mesos.yaml'
                MESOS_MASTER_HOST='100.64.176.23'
            }
            steps {
                print('Environment variables: ')
                print(env.PLAYBOOK)
                print(env.PROMETHEUS)
                print(env.BUILD_COMMIT)
                print(env.EXTRA_ANSIBLE_PARAMS)
                print(env.INVENTORY)
                print(env.MESOS_MASTER_HOST)
            }
        }
    }
}