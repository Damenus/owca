apiVersion: apps/v1
kind: Deployment
metadata:
  name: hammerdb
  labels:
    app: hammerdb
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hammerdb
  template:
    metadata:
      labels:
        app: hammerdb
    spec:
      nodeSelector:
        own_ip: 100.64.176.37
      containers:
      - name: hammerdb
        image: 100.64.176.12:80/wca/hammerdb:bc1b87e3894fd5deed1666e9d726202b1e38b7aa
        command: [ "source" ]
        args:  ["mysql.yaml" ]
        securityContext:
          runAsUser: 0
      - name: mysql-tpm-gauge
        image: 100.64.176.12:80/wca/mysql-tpm-gauge:bc1b87e3894fd5deed1666e9d726202b1e38b7aa
        command: [ "python3" ]
        args:  ["mysql_tpm_gauge.py", "-s", "mysql" ]
        securityContext:
          runAsUser: 0
